package db

import (
	"check_republic/models"
	"context"
)

var DB OfferDatabase

type OfferDatabase interface {
	CreateOffers(ctx context.Context, o ...models.Offer) error
	GetAllOffers(ctx context.Context) models.Offers
	DeleteAllOffers(ctx context.Context) error
	GetFilteredOffers(ctx context.Context, regionID uint64, timeRangeStart uint64, timeRangeEnd uint64, numberDays uint64, sortOrder string, page uint64, pageSize uint64, priceRangeWidth uint64, minFreeKilometerWidth uint64, minNumberSeats *uint64, minPrice *uint64, maxPrice *uint64, carType *string, onlyVollkasko *bool, minFreeKilometer *uint64) models.DTO
}

var regionIdToMostSpecificRegionId = map[uint64][]uint64{
	58:  {58},
	59:  {59},
	21:  {58, 59},
	60:  {60},
	61:  {61},
	22:  {60, 61},
	62:  {62},
	63:  {63},
	23:  {62, 63},
	7:   {58, 59, 60, 61, 62, 63},
	64:  {64},
	65:  {65},
	24:  {64, 65},
	66:  {66},
	67:  {67},
	25:  {66, 67},
	68:  {68},
	69:  {69},
	26:  {68, 69},
	70:  {70},
	71:  {71},
	27:  {70, 71},
	72:  {72},
	73:  {73},
	28:  {72, 73},
	8:   {64, 65, 66, 67, 68, 69, 70, 71, 72, 73},
	74:  {74},
	75:  {75},
	29:  {74, 75},
	76:  {76},
	77:  {77},
	30:  {76, 77},
	9:   {74, 75, 76, 77},
	1:   {58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77},
	78:  {78},
	79:  {79},
	80:  {80},
	81:  {81},
	31:  {78, 79, 80, 81},
	82:  {82},
	83:  {83},
	32:  {82, 83},
	84:  {84},
	85:  {85},
	33:  {84, 85},
	86:  {86},
	87:  {87},
	34:  {86, 87},
	88:  {88},
	89:  {89},
	35:  {88, 89},
	10:  {78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89},
	90:  {90},
	91:  {91},
	36:  {90, 91},
	92:  {92},
	93:  {93},
	37:  {92, 93},
	11:  {90, 91, 92, 93},
	2:   {78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93},
	94:  {94},
	95:  {95},
	38:  {94, 95},
	96:  {96},
	97:  {97},
	39:  {96, 97},
	12:  {94, 95, 96, 97},
	98:  {98},
	99:  {99},
	40:  {98, 99},
	100: {100},
	41:  {100},
	101: {101},
	102: {102},
	42:  {101, 102},
	13:  {98, 99, 100, 101, 102},
	103: {103},
	43:  {103},
	104: {104},
	105: {105},
	44:  {104, 105},
	14:  {103, 104, 105},
	3:   {94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105},
	106: {106},
	107: {107},
	45:  {106, 107},
	108: {108},
	109: {109},
	46:  {108, 109},
	15:  {106, 107, 108, 109},
	110: {110},
	111: {111},
	47:  {110, 111},
	112: {112},
	113: {113},
	48:  {112, 113},
	16:  {110, 111, 112, 113},
	4:   {106, 107, 108, 109, 110, 111, 112, 113},
	114: {114},
	115: {115},
	49:  {114, 115},
	116: {116},
	117: {117},
	50:  {116, 117},
	17:  {114, 115, 116, 117},
	118: {118},
	51:  {118},
	119: {119},
	120: {120},
	52:  {119, 120},
	18:  {118, 119, 120},
	5:   {114, 115, 116, 117, 118, 119, 120},
	121: {121},
	53:  {121},
	122: {122},
	54:  {122},
	123: {123},
	124: {124},
	55:  {123, 124},
	19:  {121, 122, 123, 124},
	56:  {56},
	57:  {57},
	20:  {56, 57},
	6:   {121, 122, 123, 124, 56, 57},
	0:   {58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 56, 57},
}
